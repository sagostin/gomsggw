# ============================================================
# GOMSGGW Environment Configuration
# ============================================================
# Copy this file to .env and fill in the required values.
# Required variables are marked with (REQUIRED)
# ============================================================

# ----------------------
# Security (REQUIRED)
# ----------------------
# 32-character encryption key for AES-256 credential encryption
ENCRYPTION_KEY=

# Admin API key for management endpoints
API_KEY=

# ----------------------
# PostgreSQL Database
# ----------------------
POSTGRES_HOST=localhost
POSTGRES_PORT=5432
POSTGRES_USER=smsgw
POSTGRES_PASSWORD=
POSTGRES_DB=smsgw
POSTGRES_SSLMODE=disable
POSTGRES_TIMEZONE=America/Vancouver
# Note: POSTGRES_HOST_AUTH_METHOD is for docker-compose, not used by Go code

# ----------------------
# Server Ports
# ----------------------
WEB_LISTEN=0.0.0.0:3000
SMPP_LISTEN=0.0.0.0:9550
MM4_LISTEN=0.0.0.0:2566

# ----------------------
# Server Identity
# ----------------------
SERVER_ID=gateway1
# Public URL for media files sent to carriers (used for MMS)
SERVER_ADDRESS=http://your-gateway.example.com:3000

# ----------------------
# MM4 (MMS) Configuration
# ----------------------
MM4_ORIGINATOR_SYSTEM=system@your-server.example.com
MM4_MSG_ID_HOST=your-server.example.com
MM4_DEBUG=false

# ----------------------
# Proxy Configuration
# ----------------------
# Enable if behind HAProxy with PROXY protocol
HAPROXY_PROXY_PROTOCOL=false
# Comma-separated CIDRs for trusted proxy networks (defaults to private ranges)
# TRUSTED_PROXIES=10.0.0.0/8,172.16.0.0/12,192.168.0.0/16

# ----------------------
# Carrier Credentials
# ----------------------
# Note: Carriers are managed via database, not env vars.
# The following are only used by carrier initialization code:
TWILIO_ACCOUNT_SID=
TWILIO_AUTH_TOKEN=
# Optional: Telnyx messaging profile ID
# TELNYX_MESSAGING_PROFILE_ID=

# ----------------------
# Prometheus Metrics
# ----------------------
PROMETHEUS_LISTEN=:2550
PROMETHEUS_PATH=/metrics

# ----------------------
# Loki Logging
# ----------------------
# Enable/disable sending logs to Loki (logs still print locally)
LOKI_ENABLED=true
LOKI_URL=http://localhost:3100/loki/api/v1/push
LOKI_USERNAME=
LOKI_PASSWORD=
LOKI_JOB=gomsggw

# ----------------------
# MMS Transcoding
# ----------------------
TRANSCODE_TEMP_PATH=./transcode

# ----------------------
# Global Retry Configuration
# ----------------------
WEBHOOK_RETRIES=3
WEBHOOK_TIMEOUT_SECS=10
WEBHOOK_RETRY_DELAY_SECS=5
SMPP_RETRIES=3
SMPP_TIMEOUT_SECS=30
MM4_RETRIES=3
MM4_TIMEOUT_SECS=60
NOTIFY_SENDER_ON_FAILURE=true

# ----------------------
# Debug (optional)
# ----------------------
DEBUG=false
PPROF_LISTEN=0.0.0.0:42666

# ----------------------
# Backup Configuration (used by scripts/backup.sh)
# ----------------------
BACKUP_LOCAL_DIR=/var/backups/gomsggw
BACKUP_RETENTION_DAYS=7
BACKUP_SCHEDULE=0 2 * * *

# Backup FTP (optional - leave empty to disable)
BACKUP_FTP_HOST=
BACKUP_FTP_PORT=21
BACKUP_FTP_USER=
BACKUP_FTP_PASSWORD=
BACKUP_FTP_DIR=/gomsggw
